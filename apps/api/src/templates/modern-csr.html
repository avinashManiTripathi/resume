<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{firstName}} {{lastName}} - Resume</title>


    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: "Nunito", sans-serif;
            color: #1f2937;
            background: #ffffff;
        }

        @media print {
            body {
                margin: 0;
            }
        }

        .item-template {
            display: none;
        }

        /* ================= LAYOUT ================= */

        main {
            max-width: 900px;
            margin: 0 auto;
            padding: 32px;
            display: flex;
            flex-direction: column;
            gap: 32px;
        }

        /* ================= FLEX UTILITIES ================= */

        .flex {
            display: flex;
        }

        .flex-col {
            flex-direction: column;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .items-center {
            align-items: center;
        }

        .justify-center {
            justify-content: center;
        }

        .gap-4 {
            gap: 16px;
        }

        .gap-x-2 {
            column-gap: 8px;
        }

        /* ================= HEADER ================= */

        header {
            display: flex;
            gap: 24px;
            align-items: center;
            text-align: center;
        }

        h1 {
            font-size: 30px;
            /* text-3xl */
            font-weight: 700;
            margin: 0;
        }

        h3 {
            margin: 4px 0;
            font-weight: 700;
        }

        p {
            margin: 4px 0;
            font-size: 14px;
        }

        /* ================= SECTIONS ================= */

        section {
            width: 100%;
        }

        section h2 {
            font-size: 14px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 6px;
            margin-bottom: 12px;
        }

        /* ================= LISTS ================= */

        ul {
            margin: 6px 0 0 18px;
            padding: 0;
        }

        li {
            margin-bottom: 6px;
            font-size: 14px;
        }

        /* ================= TEXT HELPERS ================= */

        .font-bold {
            font-weight: 700;
        }

        .text-muted {
            color: #6b7280;
            font-size: 13px;
        }

        a {
            color: #2563eb;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* ================= INLINE LIST COMMAS ================= */

        #skills-list>div:not(:last-child)::after,
        #interests-list>div:not(:last-child)::after {
            content: ",";
            margin-right: 4px;
        }

        /* ================= TITLES ================= */

        .exp-company,
        .exp-job-title,
        .proj-name,
        .edu-degree,
        .cert-name,
        .award-title,
        .achievement-title,
        .pub-title,
        .vol-organization,
        .vol-role,
        .ref-name {
            font-size: 15px;
            font-weight: 700;
        }

        /* ================= META / DATES ================= */

        .exp-start-date,
        .exp-end-date,
        .proj-start-date,
        .proj-end-date,
        .edu-end-date,
        .cert-date,
        .award-date,
        .achievement-date,
        .pub-date,
        .vol-start-date,
        .vol-end-date {
            font-size: 13px;
            color: #6b7280;
        }

        /* ================= DESCRIPTIONS ================= */

        .exp-description,
        .proj-description,
        .award-description,
        .achievement-description,
        .pub-description,
        .vol-description {
            margin-top: 4px;
        }

        /* ================= SKILLS / INTERESTS ================= */

        .skill-name,
        .interest-name {
            font-weight: 600;
        }

        /* ================= REFERENCES ================= */

        .ref-job-title,
        .ref-company,
        .ref-email,
        .ref-phone {
            font-size: 13px;
            color: #6b7280;
        }
    </style>
    <script>
        window.hydrate = function (data) {
            // Helper to set text content safely
            const setText = (id, value) => {
                const el = document.getElementById(id);
                if (el) el.textContent = value || '';
            };

            // Helper to handle links
            const setLink = (id, value) => {
                const el = document.getElementById(id);
                if (el) {
                    if (value) {
                        el.href = value;
                        el.style.display = 'inline';
                    } else {
                        el.style.display = 'none';
                    }
                }
            };

            // Helper to show/hide sections
            const toggleSection = (id, show) => {
                const el = document.getElementById(id);
                if (el) el.style.display = show ? 'block' : 'none';
            };

            // --- Personal Info ---
            if (data.personalInfo) {
                const p = data.personalInfo;
                document.title = `${p.firstName} ${p.lastName} - Resume`;
                setText('full-name', `${p.firstName} ${p.lastName}`);
                setText('job-title', p.jobTitle);
                setText('email', p.email);
                setText('phone', p.phone);
                setText('address', [p.city, p.state, p.country].filter(Boolean).join(', '));

                setLink('linkedin-link', p.linkedin);
                setLink('github-link', p.github);

                if (p.summary) {
                    setText('summary-text', p.summary);
                    toggleSection('section-summary', true);
                }
            }

            // --- Lists Rendering Helper ---
            const renderList = (listId, items, templateSelector, callback) => {
                const container = document.getElementById(listId);
                const template = document.querySelector(templateSelector);
                const sectionId = listId.replace('-list', ''); // e.g. experience-list -> experience -> section-experience

                if (!container || !template) return;

                // Clear existing items (except template/hidden ones if mixed, but here container is empty mostly)
                container.innerHTML = '';

                if (items && items.length > 0) {
                    toggleSection('section-' + sectionId.split('-')[0], true); // Ensure section is visible
                    // ACTUALLY the section ID is section-experience, listId is experience-list.
                    // Let's fix section visibility logic:
                    const sectionEl = document.getElementById('section-' + listId.replace('-list', ''));
                    if (sectionEl) sectionEl.style.display = 'block';

                    items.forEach(item => {
                        const clone = template.cloneNode(true);
                        clone.classList.remove('item-template');
                        clone.style.display = 'block'; // Make visible

                        callback(clone, item);
                        container.appendChild(clone);
                    });
                } else {
                    const sectionEl = document.getElementById('section-' + listId.replace('-list', ''));
                    if (sectionEl) sectionEl.style.display = 'none';
                }
            };

            // --- Experience ---
            renderList('experience-list', data.experience, '[data-template="experience"]', (el, item) => {
                el.querySelector('.exp-company').textContent = item.company || '';
                el.querySelector('.exp-job-title').textContent = item.jobTitle || '';
                el.querySelector('.exp-start-date').textContent = item.startDate || '';
                el.querySelector('.exp-end-date').textContent = item.endDate || 'Present';
                el.querySelector('.exp-description').innerHTML = item.description || '';
            });

            // --- Projects ---
            renderList('projects-list', data.projects, '[data-template="projects"]', (el, item) => {
                el.querySelector('.proj-name').textContent = item.name || '';
                el.querySelector('.proj-start-date').textContent = item.startDate || '';
                el.querySelector('.proj-end-date').textContent = item.endDate || 'Present';
                el.querySelector('.proj-description').innerHTML = item.description || '';
            });

            // --- Education ---
            renderList('education-list', data.education, '[data-template="education"]', (el, item) => {
                el.querySelector('.edu-degree').textContent = item.degree || '';
                el.querySelector('.edu-institution').textContent = item.institution || '';
                // el.querySelector('.edu-start-date').textContent = item.startDate || ''; // Not in HTML?
                el.querySelector('.edu-end-date').textContent = item.endDate || '';
            });

            // --- Skills ---
            renderList('skills-list', data.skills, '[data-template="skills"]', (el, item) => {
                el.querySelector('.skill-name').textContent = item.name || item;
                if (item.level) {
                    // el.querySelector('.skill-level').textContent = item.level; // Not in new HTML?
                }
                // Fix for inline display if needed by CSS
                el.style.display = 'inline-block';
            });

            // --- Languages ---
            renderList('languages-list', data.languages, '[data-template="languages"]', (el, item) => {
                el.querySelector('.lang-name').textContent = item.language || item.name || '';
                el.querySelector('.lang-proficiency').textContent = item.proficiency || '';
            });

            // --- Certifications ---
            renderList('certifications-list', data.certifications, '[data-template="certifications"]', (el, item) => {
                el.querySelector('.cert-name').textContent = item.name || '';
                el.querySelector('.cert-issuer').textContent = item.issuer || '';
                el.querySelector('.cert-date').textContent = item.date || '';
            });

            // --- Awards ---
            renderList('awards-list', data.awards, '[data-template="awards"]', (el, item) => {
                el.querySelector('.award-title').textContent = item.title || '';
                el.querySelector('.award-issuer').textContent = item.issuer || '';
                el.querySelector('.award-date').textContent = item.date || '';
                el.querySelector('.award-description').textContent = item.description || '';
            });

            // --- Achievements ---
            renderList('achievements-list', data.achievements, '[data-template="achievements"]', (el, item) => {
                el.querySelector('.achievement-title').textContent = item.title || '';
                el.querySelector('.achievement-date').textContent = item.date || '';
                el.querySelector('.achievement-description').textContent = item.description || '';
            });

            // --- Publications ---
            renderList('publications-list', data.publications, '[data-template="publications"]', (el, item) => {
                el.querySelector('.pub-title').textContent = item.title || '';
                el.querySelector('.pub-publisher').textContent = item.publisher || '';
                el.querySelector('.pub-date').textContent = item.date || '';
                el.querySelector('.pub-description').textContent = item.description || '';
            });

            // --- Volunteer ---
            renderList('volunteer-list', data.volunteer, '[data-template="volunteer"]', (el, item) => {
                el.querySelector('.vol-organization').textContent = item.organization || '';
                el.querySelector('.vol-role').textContent = item.role || '';
                el.querySelector('.vol-start-date').textContent = item.startDate || '';
                el.querySelector('.vol-end-date').textContent = item.endDate || 'Present';
                el.querySelector('.vol-description').textContent = item.description || '';
            });

            // --- Interests ---
            renderList('interests-list', data.interests, '[data-template="interests"]', (el, item) => {
                el.querySelector('.interest-name').textContent = item.name || '';
                el.style.display = 'inline-block';
            });

            // --- References ---
            renderList('references-list', data.references, '[data-template="references"]', (el, item) => {
                el.querySelector('.ref-name').textContent = item.name || '';
                el.querySelector('.ref-job-title').textContent = item.jobTitle || '';
                el.querySelector('.ref-company').textContent = item.company || '';
                el.querySelector('.ref-email').textContent = item.email || '';
                el.querySelector('.ref-phone').textContent = item.phone || '';
            });

            // --- Section Reordering ---
            if (data.order && Array.isArray(data.order)) {
                const main = document.getElementById('resume-root');
                const sections = Array.from(main.children);

                const orderMap = {};
                data.order.forEach((key, index) => {
                    orderMap['section-' + key] = index;
                });

                sections.sort((a, b) => {
                    // Always keep Personal Info (Header) at the top
                    if (a.id === 'section-personalInfo') return -1;
                    if (b.id === 'section-personalInfo') return 1;

                    // Get index from order map, default to high value if not present
                    const indexA = orderMap[a.id] !== undefined ? orderMap[a.id] : 9999;
                    const indexB = orderMap[b.id] !== undefined ? orderMap[b.id] : 9999;

                    return indexA - indexB;
                });

                // Re-append in sorted order (moves elements)
                sections.forEach(sec => main.appendChild(sec));
            }

            // --- Custom Font Family ---
            if (data.fontFamily && data.fontFamily !== 'Nunito') {
                return new Promise((resolve) => {
                    const link = document.createElement('link');
                    link.href = `https://fonts.googleapis.com/css2?family=${data.fontFamily.replace(/\s+/g, '+')}:wght@400;700&display=swap`;
                    link.rel = 'stylesheet';

                    const onFontReady = () => {
                        document.body.style.fontFamily = `"${data.fontFamily}", sans-serif`;
                        // Ensure the font file is actually loaded and rendered
                        document.fonts.load(`16px "${data.fontFamily}"`).then(() => {
                            resolve();
                        }).catch(() => {
                            console.warn('Failed to load font file');
                            resolve();
                        });
                    };

                    link.onload = onFontReady;
                    link.onerror = () => {
                        console.warn('Failed to load font CSS');
                        resolve();
                    };

                    document.head.appendChild(link);
                });
            }



            return document.fonts.ready;
        }

    </script>
</head>

<body>



    <main id="resume-root">
        <!-- Header -->
        <header id="section-personalInfo" class="flex item-center text-center justify-center">
            <div>
                <div>Avinash ka resume hai bhai </div>
                <h1 id="full-name" class="text-3xl  font-bold">{{firstName}} {{lastName}}</h1>
                <h3 id="job-title">{{jobTitle}}</h3>

                <p class="text-muted">

                    <span id="address">Seoul, South Korea</span> ·
                    <span id="email">{{email}}</span> ·
                    <span id="phone">{{phone}}</span>
                    <a id="linkedin-link" href="#" target="_blank" style="display:none;">LinkedIn</a>
                    <a id="github-link" href="#" target="_blank" style="display:none;">GitHub</a>

                </p>
            </div>
        </header>

        <!-- Summary -->
        <section id="section-summary" style="display:none;">
            <h2>Professional Summary</h2>
            <p id="summary-text">{{summary}}</p>
        </section>

        <!-- Experience -->
        <section id="section-experience" style="display:none;">
            <h2>Professional Experience</h2>
            <div id="experience-list" class="flex flex-col gap-4"></div>

            <div class="experience-item item-template" data-template="experience">
                <h3 class="font-bold">
                    <span class="exp-company">{{experience.company}}</span>,
                    <span class="exp-job-title">{{experience.jobTitle}}</span>
                </h3>
                <p class="text-muted">
                    <span class="exp-start-date">{{experience.startDate}}</span> –
                    <span class="exp-end-date">{{experience.endDate}}</span>
                </p>
                <div class="exp-description"></div>
            </div>
        </section>

        <!-- Projects -->
        <section id="section-projects" style="display:none;">
            <h2>Projects</h2>
            <div id="projects-list" class="flex flex-col gap-4"></div>

            <div class="project-item item-template" data-template="projects">
                <h3 class="proj-name font-bold">{{projects.name}}</h3>
                <p class="text-muted">
                    <span class="proj-start-date">{{projects.startDate}}</span> –
                    <span class="proj-end-date">{{projects.endDate}}</span>
                </p>
                <ul class="proj-description"></ul>
            </div>
        </section>

        <!-- Education -->
        <section id="section-education" style="display:none;">
            <h2>Education</h2>
            <div id="education-list" class="flex flex-col gap-4 "></div>

            <div class="education-item item-template" data-template="education">
                <p class="font-bold edu-degree">{{education.degree}}</p>
                <p class="text-muted">
                    <span class="edu-institution">{{education.institution}}</span> —
                    <span class="edu-end-date">{{education.endDate}}</span>
                </p>
            </div>
        </section>

        <!-- Skills -->
        <section id="section-skills" style="display:none;">
            <h2>Skills</h2>
            <div id="skills-list"
                class="flex flex-wrap items-center gap-x-2 [&>div:not(:last-child)]:after:content-[',']"></div>

            <div class="skill-item item-template" data-template="skills">
                <span class="skill-name">{{skills.name}}</span>
            </div>
        </section>

        <!-- Languages -->
        <section id="section-languages" style="display:none;">
            <h2>Languages</h2>
            <div id="languages-list" class="flex flex-col gap-4 "></div>

            <div class="language-item item-template" data-template="languages">
                <p>
                    <strong class="lang-name font-bold">{{language.language}}</strong> —
                    <span class="lang-proficiency">{{language.proficiency}}</span>
                </p>
            </div>
        </section>

        <!-- Certifications -->
        <section id="section-certifications" style="display:none;">
            <h2>Certifications</h2>
            <div id="certifications-list" class="flex flex-col gap-4 "></div>

            <div class="certification-item item-template" data-template="certifications">
                <h3 class="cert-name font-bold">{{certification.name}}</h3>
                <p class="text-muted">
                    <span class="cert-issuer">{{certification.issuer}}</span> ·
                    <span class="cert-date">{{certification.date}}</span>
                </p>
            </div>
        </section>

        <!-- Awards -->
        <section id="section-awards" style="display:none;">
            <h2>Awards & Honors</h2>
            <div id="awards-list"></div>

            <div class="award-item item-template" data-template="awards">
                <h3 class="award-title font-bold">{{award.title}}</h3>
                <p class="text-muted">
                    <span class="award-issuer">{{award.issuer}}</span> ·
                    <span class="award-date">{{award.date}}</span>
                </p>
                <p class="award-description">{{award.description}}</p>
            </div>
        </section>

        <!-- Achievements -->
        <section id="section-achievements" style="display:none;">
            <h2>Key Achievements</h2>
            <div id="achievements-list" class="flex flex-col gap-4 "></div>

            <div class="achievement-item item-template" data-template="achievements">
                <h3 class="achievement-title font-bold">{{achievement.title}}</h3>
                <p class="text-muted achievement-date">{{achievement.date}}</p>
                <p class="achievement-description">{{achievement.description}}</p>
            </div>
        </section>

        <!-- Publications -->
        <section id="section-publications" style="display:none;">
            <h2>Publications</h2>
            <div id="publications-list" class="flex flex-col gap-4"></div>

            <div class="publication-item item-template" data-template="publications">
                <h3 class="pub-title font-bold">{{publication.title}}</h3>
                <p class="text-muted">
                    <span class="pub-publisher">{{publication.publisher}}</span> ·
                    <span class="pub-date">{{publication.date}}</span>
                </p>
                <p class="pub-description">{{publication.description}}</p>
            </div>
        </section>

        <!-- Volunteer -->
        <section id="section-volunteer" style="display:none;">
            <h2>Volunteer Experience</h2>
            <div id="volunteer-list" class="flex flex-col gap-4"></div>

            <div class="volunteer-item item-template" data-template="volunteer">
                <h3 class="font-bold">
                    <span class="vol-organization">{{volunteer.organization}}</span>,
                    <span class="vol-role">{{volunteer.role}}</span>
                </h3>
                <p class="text-muted">
                    <span class="vol-start-date">{{volunteer.startDate}}</span> –
                    <span class="vol-end-date">{{volunteer.endDate}}</span>
                </p>
                <p class="vol-description">{{volunteer.description}}</p>
            </div>
        </section>

        <!-- Interests -->
        <section id="section-interests" style="display:none;">
            <h2>Interests & Hobbies</h2>
            <div id="interests-list"
                class="flex flex-wrap items-center gap-x-2 [&>div:not(:last-child)]:after:content-[',']"></div>
            <div class="interest-item item-template" data-template="interests">
                <span class="interest-name">{{interest.name}}</span>
            </div>
        </section>

        <!-- References -->
        <section id="section-references" style="display:none;">
            <h2>References</h2>
            <div id="references-list" class="flex flex-col gap-4"></div>

            <div class="reference-item item-template" data-template="references">
                <h3 class="ref-name font-bold">{{reference.name}}</h3>
                <p class="text-muted ref-job-title">{{reference.jobTitle}}</p>
                <p class="text-muted ref-company">{{reference.company}}</p>
                <p class="text-muted">
                    <span class="ref-email">{{reference.email}}</span> ·
                    <span class="ref-phone">{{reference.phone}}</span>
                </p>
            </div>
        </section>

    </main>
</body>

</html>